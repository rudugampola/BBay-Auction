{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{% block title %}Auctions{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <link href="{% static 'css/styles.css' %}/" rel="stylesheet" />


    <link rel="icon" href="{% static 'img/bbay.ico' %}/" />
  </head>

  <body class="body">
    <div class="ms-auto">
        {% if user.is_authenticated %} 
            Signed In As <strong>{{ user.username }}</strong>. 
        {% else %} 
            Not Signed In. 
        {% endif %}
    </div>
    <h1>
      <a class="link" href="{% url 'index' %}"
        ><img class="logo_img" src="{% static 'img/bbay.png' %}/"
      /></a>
    </h1>
    
    
    <ul class="nav">
      <li class="nav-item">
        <a class="nav-link link" href="{% url 'listings' %}">Active Listings</a>
      </li>
      <li class="nav-item">
        <a class="nav-link link" href="{% url 'categories' %}">Categories</a>
      </li>
      {% if user.is_authenticated %}
      <li class="nav-item">
        <a class="nav-link link" href="{% url 'watchlist' %}"
          >Watchlist
          <span style= "margin-left: 9px" class="position-absolute top-10 start-30 translate-middle badge rounded-pill bg-danger"
            >{{ request.session.watchlist_count }}
          </span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link link" href="{% url 'create' %}">Create Listing</a>
      </li>
      <li class="nav-item">
        <a class="nav-link link" href="{% url 'logout' %}">Log Out</a>
      </li>
      {% else %}
      <li class="nav-item">
        <a class="nav-link link" href="{% url 'login' %}">Log In</a>
      </li>
      <li class="nav-item">
        <a class="nav-link link" href="{% url 'register' %}">Register</a>
      </li>
      {% endif %}
      {% comment %} send the last item to the right corner {% endcomment %}      
      <li class="nav-item ms-auto">
        <img src="{% static 'img/moon.png' %}/" id="icon">
    </li>
    </ul>
    <hr />
    {% block body %} {% endblock %}
  </body>

  {% comment %} Make the footer appear at the bottom of the page {% endcomment %}
  <footer class="footer_text">
    <br>
    <div class="footer">
      <p class="text-center">
        <a class="footer_text" href="{% url 'index' %}">Home</a> |
        <a class="footer_text" href="{% url 'index' %}">About Us</a> |
        <a class="footer_text" href="{% url 'index' %}">FAQ</a>
      </p>
        <p class="text-center footer_text">Â©Ravindu Udugampola 2022</p> 
    </div>
  </footer>

  
</html>

<script>
    var icon = document.getElementById("icon");
    icon.onclick = function() {
        document.body.classList.toggle("darkmode");
        if (document.body.classList.contains("darkmode")) {
            icon.src = "{% static 'img/sun.svg' %}/";
        } else {
            icon.src = "{% static 'img/moon.svg' %}/";
        }
    } 
</script>